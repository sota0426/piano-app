"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[250],{1013:(e,t,n)=>{n.d(t,{Ay:()=>i});var a=n(2115);let l={z:"C2",x:"D2",c:"E2",v:"F2",b:"G2",n:"A2",m:"B2",q:"C3",w:"D3",e:"E3",r:"F3",t:"G3",y:"A3",u:"B3",1:"C#2",2:"D#2",3:"F#2",4:"G#2",5:"A#2",6:"C#3",7:"D#3",8:"F#3",9:"G#3",0:"A#3",a:"C4",s:"D4",d:"E4","-":"C#4","=":"D#4",f:"F4",g:"G4",h:"A4",j:"B4",k:"C5",l:"D5",";":"E5","'":"F5","[":"F#4","]":"G#4","\\":"A#4",",":"C#5",".":"D#5"},r=Object.fromEntries(Object.entries(l).filter(e=>{let[t,n]=e;return 4>=parseInt(n.slice(-1))})),o=Object.fromEntries(Object.entries(l).filter(e=>{let[t,n]=e;return parseInt(n.slice(-1))>=4})),i=e=>{let{onNoteInput:t,enabled:n,hand:i}=e;return(0,a.useEffect)(()=>{let e;if(!n)return;switch(i){case"left":e=r;break;case"right":e=o;break;default:e=l}let a=new Set,c=n=>{let l=n.key.toLowerCase();a.has(l)||(a.add(l),(n=>{if(n.ctrlKey||n.altKey||n.metaKey||n.shiftKey)return;let a=e[n.key.toLowerCase()];a&&(n.preventDefault(),t(a))})(n))},s=e=>{let t=e.key.toLowerCase();a.delete(t)};return window.addEventListener("keydown",c),window.addEventListener("keyup",s),()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",s)}},[t,n,i]),null}},3776:(e,t,n)=>{n.d(t,{Ay:()=>c,V:()=>i});var a=n(5155),l=n(9137),r=n.n(l),o=n(2115);let i=[{note:"C2",type:"white",key:"z",solfege:"ド",hand:"left"},{note:"C#2",type:"black",key:"1",solfege:"ド#",hand:"left"},{note:"D2",type:"white",key:"x",solfege:"レ",hand:"left"},{note:"D#2",type:"black",key:"2",solfege:"レ#",hand:"left"},{note:"E2",type:"white",key:"c",solfege:"ミ",hand:"left"},{note:"F2",type:"white",key:"v",solfege:"ファ",hand:"left"},{note:"F#2",type:"black",key:"3",solfege:"ファ#",hand:"left"},{note:"G2",type:"white",key:"b",solfege:"ソ",hand:"left"},{note:"G#2",type:"black",key:"4",solfege:"ソ#",hand:"left"},{note:"A2",type:"white",key:"n",solfege:"ラ",hand:"left"},{note:"A#2",type:"black",key:"5",solfege:"ラ#",hand:"left"},{note:"B2",type:"white",key:"m",solfege:"シ",hand:"left"},{note:"C3",type:"white",key:"q",solfege:"ド",hand:"left"},{note:"C#3",type:"black",key:"6",solfege:"ド#",hand:"left"},{note:"D3",type:"white",key:"w",solfege:"レ",hand:"left"},{note:"D#3",type:"black",key:"7",solfege:"レ#",hand:"left"},{note:"E3",type:"white",key:"e",solfege:"ミ",hand:"left"},{note:"F3",type:"white",key:"r",solfege:"ファ",hand:"left"},{note:"F#3",type:"black",key:"8",solfege:"ファ#",hand:"left"},{note:"G3",type:"white",key:"t",solfege:"ソ",hand:"left"},{note:"G#3",type:"black",key:"9",solfege:"ソ#",hand:"left"},{note:"A3",type:"white",key:"y",solfege:"ラ",hand:"left"},{note:"A#3",type:"black",key:"0",solfege:"ラ#",hand:"left"},{note:"B3",type:"white",key:"u",solfege:"シ",hand:"left"},{note:"C4",type:"white",key:"a",solfege:"ド",hand:"both"},{note:"C#4",type:"black",key:"-",solfege:"ド#",hand:"both"},{note:"D4",type:"white",key:"s",solfege:"レ",hand:"both"},{note:"D#4",type:"black",key:"=",solfege:"レ#",hand:"both"},{note:"E4",type:"white",key:"d",solfege:"ミ",hand:"both"},{note:"F4",type:"white",key:"f",solfege:"ファ",hand:"right"},{note:"F#4",type:"black",key:"[",solfege:"ファ#",hand:"right"},{note:"G4",type:"white",key:"g",solfege:"ソ",hand:"right"},{note:"G#4",type:"black",key:"]",solfege:"ソ#",hand:"right"},{note:"A4",type:"white",key:"h",solfege:"ラ",hand:"right"},{note:"A#4",type:"black",key:"\\",solfege:"ラ#",hand:"right"},{note:"B4",type:"white",key:"j",solfege:"シ",hand:"right"},{note:"C5",type:"white",key:"k",solfege:"ド",hand:"right"},{note:"C#5",type:"black",key:",",solfege:"ド#",hand:"right"},{note:"D5",type:"white",key:"l",solfege:"レ",hand:"right"},{note:"D#5",type:"black",key:".",solfege:"レ#",hand:"right"},{note:"E5",type:"white",key:";",solfege:"ミ",hand:"right"},{note:"F5",type:"white",key:"'",solfege:"ファ",hand:"right"}],c=e=>{let{activeKeys:t,userAnswer:n,disabledKeys:l,isPlayingQuiz:c,onKeyPress:s,activeHand:d="right"}=e,[u,h]=(0,o.useState)(48);(0,o.useEffect)(()=>{let e=()=>{let e=window.innerWidth,t=e>window.innerHeight;e>=1920?h(t?64:56):e>=1440?h(t?56:48):e>=1024?h(t?48:40):e>=768?h(t?40:36):h(t?36:28)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let f=e=>{let a=Array.from(t).some(t=>t.startsWith(e.note)),r=n.includes(e.note),o=l.includes(e.note),i=e.hand===d||"both"===e.hand;return"white"===e.type?!o&&(i||a||r)?a?"bg-blue-200 border-blue-400":r?"bg-yellow-100 border-yellow-400":"bg-white border-gray-300":"bg-gray-100 text-gray-300 border-gray-200":!o&&(i||a||r)?a?"bg-blue-600 border-blue-500":r?"bg-yellow-600 border-yellow-500":"bg-black text-white border-gray-600":"bg-gray-400 text-gray-300 border-gray-500"},y=e=>{let t=e.hand===d||"both"===e.hand;return l.includes(e.note)||c||!t},g=i.filter(e=>"white"===e.type),p=g.length*u+64;return(0,a.jsxs)("div",{className:"jsx-92e0850056cc121c flex-1 flex justify-center items-end",children:[(0,a.jsxs)("div",{className:"jsx-92e0850056cc121c relative bg-gray-200 p-4 rounded-xl shadow-lg w-full max-w-7xl",children:[(0,a.jsx)("div",{className:"jsx-92e0850056cc121c text-center mb-4",children:(0,a.jsx)("div",{className:"jsx-92e0850056cc121c "+"text-lg font-bold mb-2 ".concat("text-gray-700"),children:"left"===d?"\uD83E\uDD1A 左手モード (Left Hand)":"✋ 右手モード (Right Hand)"})}),(0,a.jsx)("div",{style:{scrollbarWidth:"thin",scrollbarColor:"#94a3b8 #e2e8f0"},className:"jsx-92e0850056cc121c relative overflow-x-auto pb-2",children:(0,a.jsxs)("div",{style:{width:"".concat(p,"px"),minWidth:"100%"},className:"jsx-92e0850056cc121c relative flex justify-start px-8",children:[(0,a.jsx)("div",{className:"jsx-92e0850056cc121c flex",children:g.map((e,n)=>{var l;let r=Array.from(t).some(t=>t.startsWith(e.note)),o=y(e),i=f(e);return(0,a.jsxs)("button",{onTouchStart:t=>{o||s(e.note,t)},onMouseDown:t=>{o||s(e.note,t)},disabled:o,style:{width:"".concat(u,"px")},className:"jsx-92e0850056cc121c "+"\n                      h-40 md:h-48 lg:h-56 xl:h-64 border rounded-b-xl\n                      transition-all duration-200 flex flex-col justify-end items-center pb-2 md:pb-3\n                      ".concat(i,"\n                      ").concat(r?"animate-pulse shadow-lg":"shadow-md","\n                      ").concat(o?"cursor-not-allowed opacity-50":"hover:opacity-80 cursor-pointer hover:shadow-lg","\n                      touch-manipulation flex-shrink-0\n                    "),children:[(0,a.jsx)("span",{className:"jsx-92e0850056cc121c "+"text-xs ".concat(o?"text-gray-300":"text-gray-600"),children:e.solfege}),(0,a.jsx)("span",{className:"jsx-92e0850056cc121c "+"text-xs ".concat(o?"text-gray-300":"text-gray-700"),children:e.note}),(0,a.jsx)("span",{className:"jsx-92e0850056cc121c text-xs bg-white bg-opacity-70 px-1 rounded mb-1 text-gray-500 border",children:null==(l=e.key)?void 0:l.toUpperCase()})]},e.note)})}),(0,a.jsx)("div",{style:{left:"32px"},className:"jsx-92e0850056cc121c absolute top-0",children:i.filter(e=>"black"===e.type).map(e=>{var n;let l=(e=>{let t=e.note.slice(0,-1),n=e.note.slice(-1),a={"C#":.75,"D#":1.75,"F#":3.75,"G#":4.75,"A#":5.75};if(!a[t])return null;let l="C".concat(n),r=g.findIndex(e=>e.note===l);return -1===r?null:(r+a[t])*u})(e);if(null===l)return null;let r=t.has(e.note),o=y(e),i=f(e),c=.6*u;return(0,a.jsxs)("button",{onTouchStart:t=>{o||s(e.note,t)},onMouseDown:t=>{o||s(e.note,t)},disabled:o,style:{left:"".concat(l-c/2,"px"),width:"".concat(1.4*c,"px")},className:"jsx-92e0850056cc121c "+"\n                      absolute h-24 md:h-32 lg:h-36 xl:h-40 \n                      border-2 rounded-b-lg shadow-xl z-10\n                      transition-all duration-200 flex flex-col justify-end items-center pb-1 md:pb-2\n                      ".concat(i,"\n                      ").concat(r?"animate-pulse shadow-2xl":"","\n                      ").concat(o?"cursor-not-allowed opacity-50":"hover:opacity-80 cursor-pointer hover:shadow-2xl","\n                      touch-manipulation\n                    "),children:[(0,a.jsx)("span",{className:"jsx-92e0850056cc121c "+"text-xs pb-1 ".concat(o?"text-gray-400":"black"===e.type?"text-white":"text-gray-600"),children:e.solfege}),(0,a.jsx)("span",{className:"jsx-92e0850056cc121c text-xs  bg-black bg-opacity-50 px-1 rounded mb-1 border text-gray-200",children:null==(n=e.key)?void 0:n.toUpperCase()})]},e.note)})})]})}),(0,a.jsx)("div",{className:"jsx-92e0850056cc121c text-center mt-2 text-xs text-gray-500",children:"← 左右にスクロールしてすべての鍵盤を表示 →"})]}),(0,a.jsx)(r(),{id:"92e0850056cc121c",children:".overflow-x-auto.jsx-92e0850056cc121c::-webkit-scrollbar{height:8px}.overflow-x-auto.jsx-92e0850056cc121c::-webkit-scrollbar-track{background:#e2e8f0;border-radius:4px}.overflow-x-auto.jsx-92e0850056cc121c::-webkit-scrollbar-thumb{background:#94a3b8;border-radius:4px}.overflow-x-auto.jsx-92e0850056cc121c::-webkit-scrollbar-thumb:hover{background:#64748b}"})]})};i.filter(e=>"right"===e.hand||"both"===e.hand).slice(0,18)},6867:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(2115);let l=()=>{let e=(0,a.useRef)(null),t={C2:65.41,"C#2":69.3,D2:73.42,"D#2":77.78,E2:82.41,F2:87.31,"F#2":92.5,G2:98,"G#2":103.83,A2:110,"A#2":116.54,B2:123.47,C3:130.81,"C#3":138.59,D3:146.83,"D#3":155.56,E3:164.81,F3:174.61,"F#3":185,G3:196,"G#3":207.65,A3:220,"A#3":233.08,B3:246.94,C4:261.63,"C#4":277.18,D4:293.66,"D#4":311.13,E4:329.63,F4:349.23,"F#4":369.99,G4:392,"G#4":415.3,A4:440,"A#4":466.16,B4:493.88,C5:523.25,"C#5":554.37,D5:587.33,"D#5":622.25,E5:659.25,F5:698.46,"F#5":739.99,G5:783.99,"G#5":830.61,A5:880,"A#5":932.33,B5:987.77,C6:1046.5,"C#6":1108.73,D6:1174.66,"D#6":1244.51,E6:1318.51,F6:1396.91};(0,a.useEffect)(()=>{let t=()=>{(()=>{try{let t=window;e.current=new(t.AudioContext||t.webkitAudioContext),console.log("Realistic Piano Audio initialized successfully")}catch(e){console.error("Failed to initialize Realistic Piano Audio:",e)}})(),e.current&&"suspended"===e.current.state&&e.current.resume(),document.removeEventListener("click",t),document.removeEventListener("keydown",t)};return document.addEventListener("click",t),document.addEventListener("keydown",t),()=>{document.removeEventListener("click",t),document.removeEventListener("keydown",t),e.current&&e.current.close()}},[]);let n=(0,a.useCallback)(function(t){var n;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.2,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;if(!e.current)return;let r=e.current,o=(n=t)<150?{brightness:.4,sustain:2.5,harmonicStrength:.9,noiseLevel:.2,filterCutoff:4*n}:n<300?{brightness:.6,sustain:1.8,harmonicStrength:.8,noiseLevel:.15,filterCutoff:6*n}:n<600?{brightness:.8,sustain:1.2,harmonicStrength:1,noiseLevel:.12,filterCutoff:8*n}:{brightness:1,sustain:.8,harmonicStrength:.6,noiseLevel:.08,filterCutoff:12*n},i=a*o.sustain,c=r.createGain(),s=r.createConvolver();s.buffer=((e,t,n)=>{let a=e.createBuffer(2,e.sampleRate*t,e.sampleRate),l=a.getChannelData(0),r=a.getChannelData(1);for(let o=0;o<a.length;o++){let a=o/e.sampleRate,i=Math.pow(1-a/t,n),c=(2*Math.random()-1)*i,s=Math.sin(50*a)*i*.3;l[o]=(c+s)*.5,r[o]=(c-s)*.5}return a})(r,t<200?3:2,3);let d=r.createGain(),u=r.createGain();t<200?(d.gain.value=.6,u.gain.value=.4):(d.gain.value=.7,u.gain.value=.3),c.connect(d),c.connect(s),s.connect(u),d.connect(r.destination),u.connect(r.destination),(()=>{let e=r.createBuffer(1,.08*r.sampleRate,r.sampleRate),n=e.getChannelData(0);for(let e=0;e<n.length;e++){let a=Math.exp(-(e/r.sampleRate)*(t<200?30:50));n[e]=(2*Math.random()-1)*a*o.noiseLevel*l}let a=r.createBufferSource(),i=r.createGain(),s=r.createBiquadFilter();a.buffer=e,s.type="bandpass",s.frequency.value=t*(t<200?6:8),s.Q.value=2,a.connect(s),s.connect(i),i.connect(c),i.gain.setValueAtTime(.5*l,r.currentTime),i.gain.exponentialRampToValueAtTime(.001,r.currentTime+.08),a.start(r.currentTime),a.stop(r.currentTime+.08)})(),[{freq:t,gain:1,detune:0,type:"sawtooth"},{freq:2*t,gain:t<200?.7:.5,detune:-2,type:"sawtooth"},{freq:3*t,gain:t<200?.4:.25,detune:1,type:"triangle"},{freq:4*t,gain:t<200?.25:.15,detune:-1,type:"triangle"},{freq:5*t,gain:t<200?.15:.1,detune:2,type:"sine"},{freq:6*t,gain:t<200?.12:.08,detune:-1.5,type:"sine"},{freq:7*t,gain:t<200?.1:.06,detune:1.2,type:"sine"},{freq:8*t,gain:t<200?.08:.04,detune:-.8,type:"sine"},{freq:2.1*t,gain:.02,detune:0,type:"sine"},{freq:3.05*t,gain:.015,detune:0,type:"sine"}].forEach((e,t)=>{let n=r.createOscillator(),a=r.createGain(),s=r.createBiquadFilter();n.type=e.type,n.frequency.setValueAtTime(e.freq,r.currentTime),n.detune.setValueAtTime(e.detune,r.currentTime),s.type="lowpass",s.frequency.value=o.filterCutoff*(1-.1*t),s.Q.value=.7,n.connect(s),s.connect(a),a.connect(c);let d=e.gain*o.harmonicStrength*l,u=i*(.8+.05*t);a.gain.setValueAtTime(0,r.currentTime),a.gain.linearRampToValueAtTime(.8*d,r.currentTime+(.008+.002*t)),a.gain.linearRampToValueAtTime(.6*d,r.currentTime+.1),a.gain.exponentialRampToValueAtTime(.2*d,r.currentTime+.3*u),a.gain.exponentialRampToValueAtTime(.001,r.currentTime+u),n.start(r.currentTime),n.stop(r.currentTime+u+.1)});let h=r.createOscillator(),f=r.createGain(),y=r.createBiquadFilter();h.type="sine",h.frequency.value=.5*t,y.type="bandpass",y.frequency.value=.5*t,y.Q.value=t<200?30:20,h.connect(y),y.connect(f),f.connect(c);let g=t<200?.15:.1;f.gain.setValueAtTime(0,r.currentTime),f.gain.linearRampToValueAtTime(g*l,r.currentTime+.1),f.gain.exponentialRampToValueAtTime(.001,r.currentTime+1.5*i),h.start(r.currentTime+.05),h.stop(r.currentTime+1.5*i),c.gain.setValueAtTime(0,r.currentTime),c.gain.linearRampToValueAtTime(.8*l,r.currentTime+.01),c.gain.linearRampToValueAtTime(.6*l,r.currentTime+.05),c.gain.exponentialRampToValueAtTime(.3*l,r.currentTime+.2*i),c.gain.exponentialRampToValueAtTime(.1*l,r.currentTime+.6*i),c.gain.exponentialRampToValueAtTime(.001,r.currentTime+i)},[]),l=(0,a.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,r=t[e];r?n(r,a,l):console.warn("Unknown note: ".concat(e))},[n]),r=(0,a.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;for(let a=0;a<e.length;a++)l(e[a],.8,n),a<e.length-1&&await new Promise(e=>setTimeout(e,t))},[l]),o=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.7;e.forEach((e,a)=>{setTimeout(()=>{l(e,t,n*(.8+.4*Math.random()))},2*a)})},[l]);return{playNote:l,playSequence:r,playChord:o,initializeAudio:(0,a.useCallback)(async()=>{e.current&&"suspended"===e.current.state&&await e.current.resume()},[]),noteFrequencies:t,isInitialized:()=>null!==e.current}}}}]);